<!doctype html>
<html lang="en">
<head>
    <title>Code coverage report for contracts/HMToken.sol</title>
    <meta charset="utf-8" />
    <link rel="stylesheet" href="../prettify.css" />
    <link rel="stylesheet" href="../base.css" />
    <meta name="viewport" content="width=device-width, initial-scale=1">
    <style type='text/css'>
        .coverage-summary .sorter {
            background-image: url(../sort-arrow-sprite.png);
        }
    </style>
</head>
<body>
<div class='wrapper'>
  <div class='pad1'>
    <h1>
      <a href="../index.html">all files</a> / <a href="index.html">contracts/</a> HMToken.sol
    </h1>
    <div class='clearfix'>
      <div class='fl pad1y space-right2'>
        <span class="strong">21.92% </span>
        <span class="quiet">Statements</span>
        <span class='fraction'>16/73</span>
      </div>
      <div class='fl pad1y space-right2'>
        <span class="strong">10% </span>
        <span class="quiet">Branches</span>
        <span class='fraction'>4/40</span>
      </div>
      <div class='fl pad1y space-right2'>
        <span class="strong">36.36% </span>
        <span class="quiet">Functions</span>
        <span class='fraction'>4/11</span>
      </div>
      <div class='fl pad1y space-right2'>
        <span class="strong">22.22% </span>
        <span class="quiet">Lines</span>
        <span class='fraction'>16/72</span>
      </div>
    </div>
  </div>
  <div class='status-line low'></div>
<pre><table class="coverage">
<tr><td class="line-count quiet">1
2
3
4
5
6
7
8
9
10
11
12
13
14
15
16
17
18
19
20
21
22
23
24
25
26
27
28
29
30
31
32
33
34
35
36
37
38
39
40
41
42
43
44
45
46
47
48
49
50
51
52
53
54
55
56
57
58
59
60
61
62
63
64
65
66
67
68
69
70
71
72
73
74
75
76
77
78
79
80
81
82
83
84
85
86
87
88
89
90
91
92
93
94
95
96
97
98
99
100
101
102
103
104
105
106
107
108
109
110
111
112
113
114
115
116
117
118
119
120
121
122
123
124
125
126
127
128
129
130
131
132
133
134
135
136
137
138
139
140
141
142
143
144
145
146
147
148
149
150</td><td class="line-coverage quiet"><span class="cline-any cline-neutral">&nbsp;</span>
<span class="cline-any cline-neutral">&nbsp;</span>
<span class="cline-any cline-neutral">&nbsp;</span>
<span class="cline-any cline-neutral">&nbsp;</span>
<span class="cline-any cline-neutral">&nbsp;</span>
<span class="cline-any cline-neutral">&nbsp;</span>
<span class="cline-any cline-neutral">&nbsp;</span>
<span class="cline-any cline-neutral">&nbsp;</span>
<span class="cline-any cline-neutral">&nbsp;</span>
<span class="cline-any cline-neutral">&nbsp;</span>
<span class="cline-any cline-neutral">&nbsp;</span>
<span class="cline-any cline-neutral">&nbsp;</span>
<span class="cline-any cline-neutral">&nbsp;</span>
<span class="cline-any cline-neutral">&nbsp;</span>
<span class="cline-any cline-neutral">&nbsp;</span>
<span class="cline-any cline-neutral">&nbsp;</span>
<span class="cline-any cline-neutral">&nbsp;</span>
<span class="cline-any cline-neutral">&nbsp;</span>
<span class="cline-any cline-neutral">&nbsp;</span>
<span class="cline-any cline-neutral">&nbsp;</span>
<span class="cline-any cline-neutral">&nbsp;</span>
<span class="cline-any cline-yes">21×</span>
<span class="cline-any cline-yes">21×</span>
<span class="cline-any cline-yes">21×</span>
<span class="cline-any cline-yes">21×</span>
<span class="cline-any cline-yes">21×</span>
<span class="cline-any cline-neutral">&nbsp;</span>
<span class="cline-any cline-neutral">&nbsp;</span>
<span class="cline-any cline-neutral">&nbsp;</span>
<span class="cline-any cline-yes">15×</span>
<span class="cline-any cline-yes">15×</span>
<span class="cline-any cline-yes">15×</span>
<span class="cline-any cline-neutral">&nbsp;</span>
<span class="cline-any cline-neutral">&nbsp;</span>
<span class="cline-any cline-neutral">&nbsp;</span>
<span class="cline-any cline-no">&nbsp;</span>
<span class="cline-any cline-no">&nbsp;</span>
<span class="cline-any cline-no">&nbsp;</span>
<span class="cline-any cline-neutral">&nbsp;</span>
<span class="cline-any cline-no">&nbsp;</span>
<span class="cline-any cline-no">&nbsp;</span>
<span class="cline-any cline-neutral">&nbsp;</span>
<span class="cline-any cline-no">&nbsp;</span>
<span class="cline-any cline-no">&nbsp;</span>
<span class="cline-any cline-neutral">&nbsp;</span>
<span class="cline-any cline-neutral">&nbsp;</span>
<span class="cline-any cline-no">&nbsp;</span>
<span class="cline-any cline-no">&nbsp;</span>
<span class="cline-any cline-neutral">&nbsp;</span>
<span class="cline-any cline-neutral">&nbsp;</span>
<span class="cline-any cline-neutral">&nbsp;</span>
<span class="cline-any cline-yes">27×</span>
<span class="cline-any cline-neutral">&nbsp;</span>
<span class="cline-any cline-neutral">&nbsp;</span>
<span class="cline-any cline-neutral">&nbsp;</span>
<span class="cline-any cline-no">&nbsp;</span>
<span class="cline-any cline-neutral">&nbsp;</span>
<span class="cline-any cline-no">&nbsp;</span>
<span class="cline-any cline-no">&nbsp;</span>
<span class="cline-any cline-no">&nbsp;</span>
<span class="cline-any cline-neutral">&nbsp;</span>
<span class="cline-any cline-neutral">&nbsp;</span>
<span class="cline-any cline-neutral">&nbsp;</span>
<span class="cline-any cline-no">&nbsp;</span>
<span class="cline-any cline-neutral">&nbsp;</span>
<span class="cline-any cline-no">&nbsp;</span>
<span class="cline-any cline-no">&nbsp;</span>
<span class="cline-any cline-no">&nbsp;</span>
<span class="cline-any cline-neutral">&nbsp;</span>
<span class="cline-any cline-no">&nbsp;</span>
<span class="cline-any cline-neutral">&nbsp;</span>
<span class="cline-any cline-no">&nbsp;</span>
<span class="cline-any cline-no">&nbsp;</span>
<span class="cline-any cline-neutral">&nbsp;</span>
<span class="cline-any cline-neutral">&nbsp;</span>
<span class="cline-any cline-neutral">&nbsp;</span>
<span class="cline-any cline-no">&nbsp;</span>
<span class="cline-any cline-neutral">&nbsp;</span>
<span class="cline-any cline-no">&nbsp;</span>
<span class="cline-any cline-no">&nbsp;</span>
<span class="cline-any cline-no">&nbsp;</span>
<span class="cline-any cline-neutral">&nbsp;</span>
<span class="cline-any cline-no">&nbsp;</span>
<span class="cline-any cline-neutral">&nbsp;</span>
<span class="cline-any cline-no">&nbsp;</span>
<span class="cline-any cline-no">&nbsp;</span>
<span class="cline-any cline-neutral">&nbsp;</span>
<span class="cline-any cline-neutral">&nbsp;</span>
<span class="cline-any cline-neutral">&nbsp;</span>
<span class="cline-any cline-no">&nbsp;</span>
<span class="cline-any cline-neutral">&nbsp;</span>
<span class="cline-any cline-neutral">&nbsp;</span>
<span class="cline-any cline-neutral">&nbsp;</span>
<span class="cline-any cline-no">&nbsp;</span>
<span class="cline-any cline-no">&nbsp;</span>
<span class="cline-any cline-neutral">&nbsp;</span>
<span class="cline-any cline-no">&nbsp;</span>
<span class="cline-any cline-no">&nbsp;</span>
<span class="cline-any cline-no">&nbsp;</span>
<span class="cline-any cline-neutral">&nbsp;</span>
<span class="cline-any cline-no">&nbsp;</span>
<span class="cline-any cline-neutral">&nbsp;</span>
<span class="cline-any cline-no">&nbsp;</span>
<span class="cline-any cline-no">&nbsp;</span>
<span class="cline-any cline-no">&nbsp;</span>
<span class="cline-any cline-no">&nbsp;</span>
<span class="cline-any cline-no">&nbsp;</span>
<span class="cline-any cline-no">&nbsp;</span>
<span class="cline-any cline-neutral">&nbsp;</span>
<span class="cline-any cline-neutral">&nbsp;</span>
<span class="cline-any cline-no">&nbsp;</span>
<span class="cline-any cline-no">&nbsp;</span>
<span class="cline-any cline-neutral">&nbsp;</span>
<span class="cline-any cline-neutral">&nbsp;</span>
<span class="cline-any cline-neutral">&nbsp;</span>
<span class="cline-any cline-no">&nbsp;</span>
<span class="cline-any cline-no">&nbsp;</span>
<span class="cline-any cline-neutral">&nbsp;</span>
<span class="cline-any cline-no">&nbsp;</span>
<span class="cline-any cline-no">&nbsp;</span>
<span class="cline-any cline-no">&nbsp;</span>
<span class="cline-any cline-neutral">&nbsp;</span>
<span class="cline-any cline-no">&nbsp;</span>
<span class="cline-any cline-neutral">&nbsp;</span>
<span class="cline-any cline-no">&nbsp;</span>
<span class="cline-any cline-no">&nbsp;</span>
<span class="cline-any cline-no">&nbsp;</span>
<span class="cline-any cline-no">&nbsp;</span>
<span class="cline-any cline-no">&nbsp;</span>
<span class="cline-any cline-no">&nbsp;</span>
<span class="cline-any cline-neutral">&nbsp;</span>
<span class="cline-any cline-neutral">&nbsp;</span>
<span class="cline-any cline-no">&nbsp;</span>
<span class="cline-any cline-no">&nbsp;</span>
<span class="cline-any cline-neutral">&nbsp;</span>
<span class="cline-any cline-neutral">&nbsp;</span>
<span class="cline-any cline-neutral">&nbsp;</span>
<span class="cline-any cline-neutral">&nbsp;</span>
<span class="cline-any cline-yes">15×</span>
<span class="cline-any cline-yes">15×</span>
<span class="cline-any cline-yes">15×</span>
<span class="cline-any cline-neutral">&nbsp;</span>
<span class="cline-any cline-yes">15×</span>
<span class="cline-any cline-yes">15×</span>
<span class="cline-any cline-neutral">&nbsp;</span>
<span class="cline-any cline-yes">15×</span>
<span class="cline-any cline-yes">15×</span>
<span class="cline-any cline-neutral">&nbsp;</span>
<span class="cline-any cline-neutral">&nbsp;</span>
<span class="cline-any cline-neutral">&nbsp;</span></td><td class="text"><pre class="prettyprint lang-js">pragma solidity 0.4.24;
import "./HMTokenInterface.sol";
import "./helpers/SafeMath.sol";
&nbsp;
contract HMToken is HMTokenInterface {
    using SafeMath for uint256;
    uint256 private constant MAX_UINT256 = 2**256 - 1;
    uint256 private constant BULK_MAX_VALUE = 1000000000 * (10 ** 18);
    uint32  private constant BULK_MAX_COUNT = 100;
&nbsp;
    event BulkTransfer(uint256 indexed _txId, uint256 _bulkCount);
    event BulkApproval(uint256 indexed _txId, uint256 _bulkCount);
&nbsp;
    mapping (address =&gt; uint256) private balances;
    mapping (address =&gt; mapping (address =&gt; uint256)) private allowed;
&nbsp;
    string public name;
    uint8 public decimals;
    string public symbol;
&nbsp;
    constructor(uint256 _totalSupply, string _name, uint8 _decimals, string _symbol) public {
        totalSupply = _totalSupply * (10 ** uint256(_decimals));
        name = _name;
        decimals = _decimals;
        symbol = _symbol;
        balances[msg.sender] = totalSupply;
    }
&nbsp;
    function transfer(address _to, uint256 _value) public returns (bool success) {
        success = transferQuiet(_to, _value);
        <span class="missing-if-branch" title="else path not taken" >E</span>require(success, "Transfer didn't succeed");
        return success;
    }
&nbsp;
<span class="fstat-no" title="function not covered" >    function transferFrom(address _spender, address _to, uint256 _value) public returns (bool success</span>) {
<span class="cstat-no" title="statement not covered" >        uint256 _allowance = allowed[_spender][msg.sender]</span>;
<span class="cstat-no" title="statement not covered" >        require(balances[_spender] &gt;= _value &amp;&amp; _allowance &gt;= _value, "Spender balance or allowance too low")</span>;
<span class="cstat-no" title="statement not covered" >        require(_to != address(0), "Can't send tokens to uninitialized address")</span>;
&nbsp;
<span class="cstat-no" title="statement not covered" >        balances[_spender] = balances[_spender].sub(_value)</span>;
<span class="cstat-no" title="statement not covered" >        balances[_to] = balances[_to].add(_value)</span>;
&nbsp;
<span class="cstat-no" title="statement not covered" >        if (_allowance &lt; MAX_UINT256) { // Special case to approve unlimited transfers</span>
<span class="cstat-no" title="statement not covered" >            allowed[_spender][msg.sender] = allowed[_spender][msg.sender].sub(_value)</span>;
        }
&nbsp;
<span class="cstat-no" title="statement not covered" >        emit Transfer(_spender, _to, _value);</span>
<span class="cstat-no" title="statement not covered" >        return true;</span>
    }
&nbsp;
    function balanceOf(address _owner) public view returns (uint256 balance) {
        return balances[_owner];
    }
&nbsp;
<span class="fstat-no" title="function not covered" >    function approve(address _spender, uint256 _value) public returns (bool success</span>) {
<span class="cstat-no" title="statement not covered" >        require(_spender != address(0), "Token spender is an uninitialized address")</span>;
&nbsp;
<span class="cstat-no" title="statement not covered" >        allowed[msg.sender][_spender] = _value</span>;
<span class="cstat-no" title="statement not covered" >        emit Approval(msg.sender, _spender, _value);</span> //solhint-disable-line indent, no-unused-vars
<span class="cstat-no" title="statement not covered" >        return true;</span>
    }
&nbsp;
<span class="fstat-no" title="function not covered" >    function increaseApproval(address _spender, uint _delta) public returns (bool success</span>) {
<span class="cstat-no" title="statement not covered" >        require(_spender != address(0), "Token spender is an uninitialized address")</span>;
&nbsp;
<span class="cstat-no" title="statement not covered" >        uint _oldValue = allowed[msg.sender][_spender]</span>;
<span class="cstat-no" title="statement not covered" >        if (_oldValue.add(_delta) &lt; _oldValue || _oldValue.add(_delta) &gt;= MAX_UINT256) { // Truncate upon overflow.</span>
<span class="cstat-no" title="statement not covered" >            allowed[msg.sender][_spender] = MAX_UINT256.sub(1)</span>;
        } else {
<span class="cstat-no" title="statement not covered" >            allowed[msg.sender][_spender] = allowed[msg.sender][_spender].add(_delta)</span>;
        }
<span class="cstat-no" title="statement not covered" >        emit Approval(msg.sender, _spender, allowed[msg.sender][_spender]);</span>
<span class="cstat-no" title="statement not covered" >        return true;</span>
    }
&nbsp;
<span class="fstat-no" title="function not covered" >    function decreaseApproval(address _spender, uint _delta) public returns (bool success</span>) {
<span class="cstat-no" title="statement not covered" >        require(_spender != address(0), "Token spender is an uninitialized address")</span>;
&nbsp;
<span class="cstat-no" title="statement not covered" >        uint _oldValue = allowed[msg.sender][_spender]</span>;
<span class="cstat-no" title="statement not covered" >        if (_delta &gt; _oldValue) { // Truncate upon overflow.</span>
<span class="cstat-no" title="statement not covered" >            allowed[msg.sender][_spender] = 0</span>;
        } else {
<span class="cstat-no" title="statement not covered" >            allowed[msg.sender][_spender] = allowed[msg.sender][_spender].sub(_delta)</span>;
        }
<span class="cstat-no" title="statement not covered" >        emit Approval(msg.sender, _spender, allowed[msg.sender][_spender]);</span>
<span class="cstat-no" title="statement not covered" >        return true;</span>
    }
&nbsp;
<span class="fstat-no" title="function not covered" >    function allowance(address _owner, address _spender) public view returns (uint256 remaining</span>) {
<span class="cstat-no" title="statement not covered" >        return allowed[_owner][_spender];</span>
    }
&nbsp;
<span class="fstat-no" title="function not covered" >    function transferBulk(address[] _tos, uint256[] _values, uint256 _txId) public returns (uint256 _bulkCount</span>) {
<span class="cstat-no" title="statement not covered" >        require(_tos.length == _values.length, "Amount of recipients and values don't match")</span>;
<span class="cstat-no" title="statement not covered" >        require(_tos.length &lt; BULK_MAX_COUNT, "Too many recipients")</span>;
&nbsp;
<span class="cstat-no" title="statement not covered" >        uint256 _bulkValue = 0</span>;
<span class="cstat-no" title="statement not covered" >        for (uint j = 0; j &lt; _tos.length; ++j) {</span>
<span class="cstat-no" title="statement not covered" >            _bulkValue = _bulkValue.add(_values[j])</span>;
        }
<span class="cstat-no" title="statement not covered" >        require(_bulkValue &lt; BULK_MAX_VALUE, "Bulk value too high")</span>;
&nbsp;
<span class="cstat-no" title="statement not covered" >        _bulkCount = 0</span>;
        bool _success;
<span class="cstat-no" title="statement not covered" >        for (uint i = 0; i &lt; _tos.length; ++i) {</span>
<span class="cstat-no" title="statement not covered" >            _success = transferQuiet(_tos[i], _values[i])</span>;
<span class="cstat-no" title="statement not covered" >            if (_success) {</span>
<span class="cstat-no" title="statement not covered" >                _bulkCount = _bulkCount.add(1)</span>;
            }
        }
<span class="cstat-no" title="statement not covered" >        emit BulkTransfer(_txId, _bulkCount);</span>
<span class="cstat-no" title="statement not covered" >        return _bulkCount;</span>
    }
&nbsp;
<span class="fstat-no" title="function not covered" >    function approveBulk(address[] _spenders, uint256[] _values, uint256 _txId) public returns (uint256 _bulkCount</span>) {
<span class="cstat-no" title="statement not covered" >        require(_spenders.length == _values.length, "Amount of spenders and values don't match")</span>;
<span class="cstat-no" title="statement not covered" >        require(_spenders.length &lt; BULK_MAX_COUNT, "Too many spenders")</span>;
&nbsp;
<span class="cstat-no" title="statement not covered" >        uint256 _bulkValue = 0</span>;
<span class="cstat-no" title="statement not covered" >        for (uint j = 0; j &lt; _spenders.length; ++j) {</span>
<span class="cstat-no" title="statement not covered" >            _bulkValue = _bulkValue.add(_values[j])</span>;
        }
<span class="cstat-no" title="statement not covered" >        require(_bulkValue &lt; BULK_MAX_VALUE, "Bulk value too high")</span>;
&nbsp;
<span class="cstat-no" title="statement not covered" >        _bulkCount = 0</span>;
        bool _success;
<span class="cstat-no" title="statement not covered" >        for (uint i = 0; i &lt; _spenders.length; ++i) {</span>
<span class="cstat-no" title="statement not covered" >            _success = increaseApproval(_spenders[i], _values[i])</span>;
<span class="cstat-no" title="statement not covered" >            if (_success) {</span>
<span class="cstat-no" title="statement not covered" >                _bulkCount = _bulkCount.add(1)</span>;
            }
        }
<span class="cstat-no" title="statement not covered" >        emit BulkApproval(_txId, _bulkCount);</span>
<span class="cstat-no" title="statement not covered" >        return _bulkCount;</span>
    }
&nbsp;
    // Like transfer, but fails quietly.
    function transferQuiet(address _to, uint256 _value) internal returns (bool success) {
        <span class="missing-if-branch" title="if path not taken" >I</span>if (_to == address(0)) <span class="cstat-no" title="statement not covered" >return false;</span> // Preclude burning tokens to uninitialized address.
        <span class="missing-if-branch" title="if path not taken" >I</span>if (_to == address(this)) <span class="cstat-no" title="statement not covered" >return false;</span> // Preclude sending tokens to the contract.
        <span class="missing-if-branch" title="if path not taken" >I</span>if (balances[msg.sender] &lt; _value) <span class="cstat-no" title="statement not covered" >return false;</span>
&nbsp;
        balances[msg.sender] = balances[msg.sender].sub(_value);
        balances[_to] = balances[_to].add(_value);
&nbsp;
        emit Transfer(msg.sender, _to, _value);
        return true;
    }
}
&nbsp;</pre></td></tr>
</table></pre>
<div class='push'></div><!-- for sticky footer -->
</div><!-- /wrapper -->
<div class='footer quiet pad2 space-top1 center small'>
  Code coverage
  generated by <a href="http://istanbul-js.org/" target="_blank">istanbul</a> at Sat Jan 12 2019 12:09:37 GMT+0200 (Eastern European Standard Time)
</div>
</div>
<script src="../prettify.js"></script>
<script>
window.onload = function () {
        if (typeof prettyPrint === 'function') {
            prettyPrint();
        }
};
</script>
<script src="../sorter.js"></script>
</body>
</html>
